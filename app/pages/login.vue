<template>
  <div class="flex flex-col items-center justify-center gap-4 p-4">
    <UPageCard class="w-full max-w-md">
      <UAuthForm
        title="Login"
        description="Login to access your account."
        icon="i-lucide-user"
        :providers="providers"
      />
    </UPageCard>
  </div>
</template>

<script setup lang="ts">
const { login } = useAuth()

const providers = [{
  label: 'Ethereum',
  icon: 'i-simple-icons-ethereum',
  onClick: async () => {
    try {
      console.log('ğŸš€ DÃ©but de la connexion...')
      const result = await login()
      console.log('ğŸ“Š RÃ©sultat de la connexion:', result)
      
      // Toujours rediriger vers les messages aprÃ¨s connexion
      // La modal pour le username sera gÃ©rÃ©e automatiquement par app.vue si nÃ©cessaire
      console.log('âœ… Redirection vers messages')
      navigateTo('/messages')
      
    } catch (error) {
      // L'erreur est dÃ©jÃ  gÃ©rÃ©e dans le composable
      console.error('âŒ Login failed:', error)
    }
  }
}]
</script>